---
layout: default
title: patterns
---
<style>  
.wind-window {
    position: relative;
    height: 400px;
    width: 800px;
    border: 1px solid #fff;
    background-image: url("/assets/images/kilkennySky.png");
    background-size: 800px 400px;
}

#kite { 
    position: relative;
    top: 90%;
    left: 385px;
    width: 45px; 
    height: 25px; 
    background-image: url("/assets/images/kite.png");
    background-size: 45px 25px;
} 
</style>

<div class="wind-window">
    <div id="kite"> </div>
</div>

<input type="button" value="reset" onclick="reset();" />
<input type="button" value="L-1" onclick="L1();" />
<input type="button" value="L-2" onclick="L2();" />
<input type="button" value="L-3" onclick="L3();" />
<input type="button" value="L-4" onclick="L4();" />

<script>
    var k = document.getElementById('kite');
    var yBottom = '90';
    var yLow = '80';
    var yMid = '50';
    var yTop = '10';
    var xLeft = '10';
    var xMidLeft = '30';
    var xMid = '48';
    var xMidRight = '60';
    var xRight = '90';
    var spinFast = '.3';
    var spinSlow = '1';
    var spinVSlow = '2.5';

    function moveX(perc, duration) {
        return new Promise(resolve => {
            setTimeout(() => {
                k.style.transition = duration + 's';
                k.style.transitionTimingFunction = 'ease-in-out';
                k.style.transitionDelay = '0s';
                k.style.left = perc + '%';

                k.addEventListener('transitionend', function handler() {
                    k.removeEventListener('transitionend', handler);
                    resolve(k);
                });
            }, 0);
        })
    }

    function moveY(perc, duration) {
        return new Promise(resolve => {
            setTimeout(() => {
                k.style.transition = duration + 's';
                k.style.transitionTimingFunction = 'ease-in-out';
                k.style.transitionDelay = '0s';
                k.style.top = perc + '%';

                k.addEventListener('transitionend', function handler() {
                    k.removeEventListener('transitionend', handler);
                    resolve(k);
                });
            }, 0);
        })
    }

    function moveXY(x, y, angle, duration) {
        return new Promise(resolve => {
            setTimeout(() => {
                k.style.transition = duration + 's';
                k.style.transitionTimingFunction = 'ease-in-out';
                k.style.transitionDelay = '.5s';
                k.style.transform = 'rotate(' + angle + 'deg)'; 
                k.style.top = y + '%';
                k.style.left = x + '%';

                k.addEventListener('transitionend', function handler() {
                    k.removeEventListener('transitionend', handler);
                    resolve(k);
                });
            }, 0);
        })
    }

    function rotate(angle, duration, pause) {
        return new Promise(resolve => {
            setTimeout(() => {
                k.style.transition = duration + 's';

                if (parseInt(pause) > 1) {
                    k.style.transitionDelay = pause + 's';
                } else {
                    k.style.transitionDelay = '1s';
                }

                k.style.transform = 'rotate(' + angle + 'deg)'; 

                k.addEventListener('transitionend', function handler() {
                    k.removeEventListener('transitionend', handler);
                    resolve(k);
                });
            }, 0);
        })
    }

    function reset() {
        rotate(0, 0);
        moveY(yBottom, .1).then(k => {
            moveX(xMid, .1);
        });
    }

    async function patternLooper(pat) {
        var i, x, y, mvType, dest, angle, duration;

        for (i = 0; i < pat.length; i++) {
            mvType = pat[i][0];

            if (mvType == moveXY) {
                x = pat[i][1];
                y = pat[i][2];
                angle = pat[i][3];
                duration = pat[i][4];
                await mvType(x, y, angle, duration);
            } else {
                dest = pat[i][1];
                duration = pat[i][2];
                await mvType(dest, duration);
            }
        }
    }

    function L1() {
        var pat = [];
        pat.push([moveY, yMid, 1.5]);
        pat.push([rotate, -90, spinSlow]);
        pat.push([moveX, xLeft, 2]);
        pat.push([rotate, 90, spinVSlow]);
        pat.push([moveX, xRight, 3]);
        pat.push([rotate, -90, spinVSlow]);
        pat.push([moveX, xMid, 2]);
        pat.push([rotate, 0, spinSlow]);
        pat.push([moveY, yBottom, 2]);

        patternLooper(pat);
    }

    function L2() {
        var pat = [];
        pat.push([moveY, yMid, 1.5]);
        pat.push([rotate, -90, spinSlow]);
        pat.push([moveX, xLeft, 2]);
        pat.push([rotate, 90, spinSlow]);
        pat.push([moveX, xRight, 2]);
        pat.push([rotate, -90, spinSlow]);
        pat.push([moveX, xMid, 2]);
        pat.push([rotate, 270, spinVSlow]);
        pat.push([moveX, xLeft, 2]);
        pat.push([rotate, 450, spinVSlow]);
        pat.push([moveX, xMid, 2]);
        pat.push([rotate, 0, spinVSlow]);
        pat.push([moveY, yTop, 1]);
        pat.push([rotate, 180, spinSlow]);
        pat.push([moveY, yLow, 2]);
        pat.push([rotate, 0, spinSlow]);
        pat.push([moveY, yBottom, .5]);

        patternLooper(pat);
    }
    
    function L3() {
        var pat = [];
        pat.push([rotate, 180, spinFast, .1]);
        pat.push([moveY, yLow, 1]);
        pat.push([rotate, 0, spinSlow, .1]);
        pat.push([moveY, yMid, 1.5]);
        pat.push([moveX, xMidLeft, 2]);
        pat.push([rotate, -720, spinVSlow, .1]);
        pat.push([moveX, xMidRight, 2]);
        pat.push([rotate, 0, spinVSlow, .1]);
        pat.push([moveX, xMid, 2]);
        pat.push([rotate, 90, spinSlow]);
        pat.push([moveY, '65', 1]);
        pat.push([rotate, -90, spinSlow]);
        pat.push([moveY, yBottom, 1]);

        patternLooper(pat);
    }

    function L4() {
        var pat = [];
        pat.push([rotate, 180, spinFast, .1]);
        pat.push([moveY, yLow, 1]);
        pat.push([moveX, xMidLeft, 2]);
        pat.push([moveXY, xLeft, yMid, 270, 2]);
        pat.push([moveX, xMidLeft, 2]);
        pat.push([rotate, 630, spinSlow, .1]);
        pat.push([rotate, 270, spinSlow, .1]);
        pat.push([rotate, 90, spinSlow, .1]);
        pat.push([moveX, xMidRight, 2]);
        pat.push([rotate, 450, spinSlow, .1]);
        pat.push([rotate, 90, spinSlow, .1]);
        pat.push([moveX, xMid, 2]);
        pat.push([moveY, yBottom, 2]);
        pat.push([moveY, yMid, 2]);
        pat.push([rotate, -90, spinSlow, 0]);
        pat.push([moveY, yBottom, 2]);
        pat.push([moveY, yMid, 2]);
        pat.push([moveX, xLeft, 2]);
        pat.push([moveXY, xMidLeft, yLow, -180, 2]);
        pat.push([moveX, xMidRight, 2]);
        pat.push([moveXY, xRight, yMid, -270, 2]);
        pat.push([moveXY, xMidRight, yTop, -360, 2]);
        pat.push([moveX, xMid, 2]);
        pat.push([rotate, -180, spinSlow, 0]);
        pat.push([moveY, yLow, 2]);
        pat.push([rotate, 0, spinSlow, 0]);
        pat.push([moveY, yBottom, 2]);

        patternLooper(pat);
    }
</script>
